---
title: Interrupts
description: Learn about interrupts in MicroPython and how they allow immediate response to events.
layout: lesson
type: page
cover: assets/cover.png
---

## Interrupts

In MicroPython, an interrupt is a signal to the processor emitted by hardware or software indicating an event that needs immediate attention. Interrupts allow the program to respond to events (like a button press) immediately, without polling.

---

## What is an Interrupt?

An interrupt is a signal to the processor emitted by hardware or software indicating an event that needs immediate attention. In MicroPython, interrupts allow the program to respond to events (like a button press) immediately, without the need for constant polling.

> ## What is Polling?
>
> Polling is a technique where a program repeatedly checks the status of a device or condition at regular intervals. It involves the CPU actively waiting to monitor the status of an input or a flag to determine if a certain event has occurred.

---

## Types of Interrupts

- **Hardware Interrupts**: Generated by hardware devices like timers, keyboards, or network cards.
- **Software Interrupts**: Generated by software instructions, used for system calls or inter-process communication.

In MicroPython, interrupts are often used to handle events like pin changes (e.g., button presses) or timer overflows.

---

## Handling Interrupts in MicroPython

To handle interrupts in MicroPython, you typically use the `machine` module, which provides the necessary functionality to configure and manage interrupts.

### Example: Handling a Button Press Interrupt

Hereâ€™s an example of setting up an interrupt to handle a button press:

```python
import machine

# Define the pin connected to the button
button_pin = machine.Pin(14, machine.Pin.IN, machine.Pin.PULL_UP)

# Define the interrupt handler function
def handle_interrupt(pin):
    print("Button pressed!")

# Configure the pin to trigger an interrupt on falling edge
button_pin.irq(trigger=machine.Pin.IRQ_FALLING, handler=handle_interrupt)
```

In this example, the `handle_interrupt` function is called whenever the button connected to pin 14 is pressed.

---

## Best Practices for Using Interrupts

When writing interrupt service routines (ISRs), consider the following best practices:

- **Keep ISRs Short and Simple**: Minimize the amount of code in the ISR to ensure it executes quickly.
- **Avoid Memory Allocation**: Do not allocate memory (e.g., appending to lists or inserting into dictionaries) within an ISR to prevent unexpected behavior.
- **Use `micropython.schedule`**: To defer longer processing to the main code, use `micropython.schedule`.
- **Pre-Allocate Buffers**: If an ISR returns multiple bytes, use a pre-allocated `bytearray`. For multiple integers, consider using an `array.array`.
- **Manage Shared Data Carefully**: When sharing data between the main program and an ISR, disable interrupts before accessing the data in the main program and re-enable them immediately afterward to prevent race conditions.
- **Understand Real-Time Programming**: Familiarize yourself with concepts like critical sections and reentrant code to write efficient and reliable ISRs.

---

### Summary

Interrupts in MicroPython provide a way to respond immediately to events without constant polling. By configuring hardware and software interrupts, you can make your programs more efficient and responsive. Following best practices ensures your interrupt service routines are effective and reliable.

---
