<svg xmlns="http://www.w3.org/2000/svg" width="760" height="260" viewBox="0 0 760 260" role="img" aria-labelledby="title desc">
  <title id="title">GROUP BY buckets mental model</title>
  <desc id="desc">Rows are grouped into buckets by key values; aggregates summarize each bucket.</desc>
  <defs>
    <style>
      .label{font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif;font-size:14px;fill:#1f2937}
      .small{font-size:12px;fill:#374151}
      .box{fill:#eef2ff;stroke:#6366f1;stroke-width:2}
      .bucket{fill:#ecfeff;stroke:#06b6d4;stroke-width:2}
      .arrow{stroke:#6b7280;stroke-width:2;marker-end:url(#arrow)}
    </style>
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="6" refY="3" orient="auto">
      <path d="M0,0 L0,6 L9,3 z" fill="#6b7280" />
    </marker>
  </defs>

  <!-- Input rows -->
  <rect x="20" y="40" width="180" height="160" rx="8" class="box"/>
  <text x="30" y="62" class="label">rows</text>
  <text x="30" y="88" class="small">day, time, total_bill, tip</text>
  <text x="30" y="108" class="small">Thur, Lunch, 12.3, 2.0</text>
  <text x="30" y="128" class="small">Fri, Dinner, 21.5, 3.8</text>
  <text x="30" y="148" class="small">Sat, Dinner, 30.1, 4.2</text>
  <text x="30" y="168" class="small">Sun, Dinner, 15.0, 2.5</text>

  <!-- Arrow to buckets -->
  <line x1="210" y1="120" x2="290" y2="120" class="arrow"/>
  <text x="220" y="110" class="small">GROUP BY day, time</text>

  <!-- Buckets -->
  <rect x="300" y="30" width="190" height="90" rx="8" class="bucket"/>
  <text x="312" y="52" class="label">bucket A</text>
  <text x="312" y="76" class="small">day=Fri, time=Dinner</text>
  <text x="312" y="96" class="small">rows → SUM, AVG, COUNT</text>

  <rect x="300" y="140" width="190" height="90" rx="8" class="bucket"/>
  <text x="312" y="162" class="label">bucket B</text>
  <text x="312" y="186" class="small">day=Sat, time=Dinner</text>
  <text x="312" y="206" class="small">rows → SUM, AVG, COUNT</text>

  <!-- Arrow to result -->
  <line x1="500" y1="120" x2="580" y2="120" class="arrow"/>
  <text x="510" y="110" class="small">aggregates</text>

  <!-- Result table -->
  <rect x="590" y="40" width="150" height="160" rx="8" class="box"/>
  <text x="600" y="62" class="label">result</text>
  <text x="600" y="88" class="small">day, time, revenue,</text>
  <text x="600" y="106" class="small">orders, avg_bill</text>
  <text x="600" y="136" class="small">Fri, Dinner, …</text>
  <text x="600" y="156" class="small">Sat, Dinner, …</text>
</svg>
