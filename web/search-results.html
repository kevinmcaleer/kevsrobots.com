---
layout: content
title: Search Results 
---
{% include breadcrumbs.html %}
    <h1>Search Results</h1>
    <h2>Find articles, tutorials, how it works, projects, ideas and more.</h2>
    <p id="search-query-display">Showing Results for: <span id="search-query"></span></p>

    <hr />
    <div id="results-container"></div>

    <script>
    document.addEventListener('DOMContentLoaded', function() {
        var urlParams = new URLSearchParams(window.location.search);
        var query = urlParams.get('query');

         // Set the search query in the "Showing Results for" section
        if (query) {
            document.getElementById('search-query').textContent = query;
        } else {
            document.getElementById('search-query-display').textContent = 'Showing All Results';
        }
        
        // Call your API to get the search results
        fetch('http://search.kevsrobots.com:8000/search/?query=' + encodeURIComponent(query))
            .then(response => response.json())
            .then(data => displayResults(data.results))
            .catch(error => console.error('Error:', error));
    });

    function displayResults(results) {
        var resultsContainer = document.getElementById('results-container');
        resultsContainer.innerHTML = ''; // Clear previous results

        // Define a default or placeholder image URL
        var defaultImage = '/assets/img/default_image.png'; // Update with the path to your default image

        // Display each result
        results.forEach(function(result) {
            var div = document.createElement('div');
            var imageUrl = result.cover_image && result.cover_image !== "https://www.kevsrobots.com/DefaultImagePath"
                        ? result.cover_image 
                        : defaultImage; // Use the default image if cover_image is not available
            // Format the date
            var publishedDate = new Date(result.date);
            var formattedDate = publishedDate.toLocaleDateString('en-US', {  day: 'numeric', month: 'long',year: 'numeric' });

            div.innerHTML = `<div class="row row-cols g-1 m-3">
                <div class="col">
                            <div class="row">
                            <div class="col-1">
                                <img src="${imageUrl}" alt="Cover Image" class="img-fluid w-100" style="width=100px">
                            </div>
                            <div class="col-11">
                            <p><b>${result.page_title}</b><br />
                            ${result.description} | Published: ${formattedDate}</p>
                            <a href="${result.url}">${result.url}</a>
                            </div>                    
                             </div>
                             </div><hr />`;
            resultsContainer.appendChild(div);
        });
    }
    </script>
</body>
</html>
